<div class="container one-column">
  <div class="content">
    <h1 class="label">Регистрация</h1>
    <p class="tagline">
      Введи свою почту, а также придумай имя пользователя и пароль. Если ты
      забудешь пароль, ты всегда сможешь восстановить его.
    </p>

    <form [formGroup]="form">
      <div>
        <app-usual-input
          [inputRequired]="true"
          [max]="20"
          type="text"
          id="username"
          formControlName="username"
          [placeholder]="'Имя пользователя'"
          required
          [error]="
           !form.get('username')?.hasError('usernameExists')?
            (form.get('username')?.invalid &&
            (form.get('username')?.dirty || form.get('username')?.touched)
              ? 'Имя пользователя должно содержать от 4 до 20 символов, среди которых могут быть буквы (минимум одна), цифры, а также нижние почеркивания и точки (не подряд)'
              : ''):''
          "
        ></app-usual-input>
                        <div class="error" *ngIf="form.get('username')?.hasError('usernameExists')">
                    Это имя пользователя уже занято
                  </div>
      </div>
     <div>
        <app-usual-input
          [inputRequired]="true"
          type="text"
          [max]="64"
          id="email"
          formControlName="email"
          [placeholder]="'Электронная почта'"
          required
          [error]="
          !form.get('email')?.hasError('emailExists')?
            form.get('email')?.invalid &&
            (form.get('email')?.dirty || form.get('email')?.touched)
              ? 'Введи корректный адрес электронной почты'
              : '':''
          "
        ></app-usual-input>
        <div class="error" *ngIf="form.get('email')?.hasError('emailExists')">
                    Пользователь с такой электронной почтой уже существует
                  </div>
     </div>
       <app-usual-input
              [inputType]="'password'"

       [inputRequired]="true"
        id="password"
        formControlName="password"
        [placeholder]="'Пароль'"
        [max]="20"
        required
        [error]="
          form.get('password')?.invalid &&
          (form.get('password')?.dirty || form.get('password')?.touched)
            ? 'Пароль должен содержать от 8 до 20 символов, среди которых как минимум: одна цифра, одна заглавная и строчная буква'
            : ''"
      ></app-usual-input>
    </form>


    <hr />

    <div class="buttons">
      <app-button
        [ngStyle]="{
          'pointer-events': form.valid ? 'all' : 'none'
        }"
        (click)="modalAreYouSureShow = true"
        [disabled]="form.valid"
        [rounded]="true"
        [color]="'prim'"
        [text]="'Регистрация'"
      ></app-button>
    </div>
  </div>
</div>

<app-modal
  @modal
  [style]="'prim'"
  *ngIf="modalAreYouSureShow"
  [title]="'Подтвердите регистрацию'"
  [type]="'yesOrNo'"
  (resultEmit)="handleAreYouSureModalResult($event)"
  [buttonsText]="['Да', 'Нет']"
  [description]="
    'Вы уверены, что хотите зарегистрироваться с введенными данными?'
  "
></app-modal>


<app-modal
  [style]="'sec'"
  @modal
  *ngIf="modalSuccessShow"
  [title]="'Успешная регистрация!'"
  [type]="'Ok'"
  (resultEmit)="handleSuccessModalResult()"
  [buttonsText]="['На главную']"
  [description]="
    'Регистрация с введенными данными прошла успешно. Вы можете пользоваться всеми функциями сайта.'
  "
></app-modal>
